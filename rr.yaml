version: "3"

rpc:
  listen: tcp://0.0.0.0:6001

server:
  command: "php worker.php"
  relay: pipes

temporal:
  address: ${TEMPORAL_ADDRESS:-temporal:7233}
  namespace: default
  activities:
    num_workers: 2
    max_concurrent: 100
    allocate_timeout: 60s
    reset_timeout: 60s
    destroy_timeout: 60s
    dynamic_allocator:
      max_workers: ${TEMPORAL_ROADRUNNER_MAX_WORKERS_COUNT:-25}
      spawn_rate: 10
      idle_timeout: 60s
    supervisor:
      watch_tick: 1s
      ttl: 0s
      idle_ttl: 0s
      max_worker_memory: 256
      exec_ttl: 60s

logs:
  level: debug
  mode: production